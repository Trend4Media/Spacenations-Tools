<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Spieler-√úbersicht</title>
	<link rel="stylesheet" href="css/theme-variables.css">
	<link rel="stylesheet" href="css/enhanced-navigation.css">
	<link rel="stylesheet" href="css/global-footer.css">
	<style>
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: var(--bg-gradient);
			color: var(--text-primary);
			min-height: 100vh;
			margin: 0;
		}
		.container {
			max-width: 1400px;
			margin: 0 auto;
			padding: 20px;
		}
		.card {
			background: var(--bg-panel);
			border: 2px solid var(--border-primary);
			border-radius: 15px;
			padding: 20px;
			box-shadow: 0 0 20px var(--border-shadow);
			backdrop-filter: blur(10px);
			margin-bottom: 20px;
		}
		.card h2 {
			margin-top: 0;
			color: var(--accent-primary);
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		/* Spieler-Liste */
		.players-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 15px;
		}
		.player-card {
			background: var(--card-bg);
			border: 1px solid var(--card-border);
			border-radius: 8px;
			padding: 15px;
			cursor: pointer;
			transition: all 0.2s;
		}
		.player-card:hover {
			border-color: var(--accent-primary);
			transform: translateY(-2px);
		}
		.player-card.selected {
			border-color: var(--accent-primary);
			background: var(--accent-primary)10;
		}
		.player-name {
			font-size: 1.1rem;
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 8px;
		}
		.player-stats {
			font-size: 0.9rem;
			color: var(--text-secondary);
		}
		.player-threat {
			display: inline-block;
			padding: 4px 8px;
			border-radius: 4px;
			font-size: 0.8rem;
			font-weight: 600;
			margin-top: 8px;
		}
		.last-report {
			font-size: 0.8rem;
			color: var(--text-secondary);
			margin-top: 5px;
		}
		
		/* Spieler-Details */
		.player-details {
			display: none;
		}
		.player-details.active {
			display: block;
		}
		.detail-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
		}
		.detail-header h3 {
			margin: 0;
			color: var(--accent-primary);
		}
		.report-history {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 15px;
			margin-bottom: 20px;
		}
		.history-item {
			background: var(--card-bg);
			border: 1px solid var(--card-border);
			border-radius: 6px;
			padding: 12px;
		}
		.history-date {
			font-size: 0.8rem;
			color: var(--text-secondary);
			margin-bottom: 5px;
		}
		.history-planet {
			font-weight: 600;
			margin-bottom: 5px;
		}
		.history-threat {
			display: inline-block;
			padding: 2px 6px;
			border-radius: 3px;
			font-size: 0.7rem;
			font-weight: 600;
		}
		
		/* Suchfeld */
		.search-container {
			margin-bottom: 20px;
		}
		.search-input {
			width: 100%;
			max-width: 400px;
			padding: 10px;
			border: 1px solid var(--card-border);
			border-radius: 8px;
			background: var(--card-bg);
			color: var(--text-primary);
			font-size: 1rem;
		}
		
		/* Statistiken */
		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 15px;
			margin-bottom: 20px;
		}
		.stat-card {
			background: var(--card-bg);
			border: 1px solid var(--card-border);
			border-radius: 6px;
			padding: 15px;
			text-align: center;
		}
		.stat-number {
			font-size: 2rem;
			font-weight: 700;
			color: var(--accent-primary);
			margin-bottom: 5px;
		}
		.stat-label {
			font-size: 0.9rem;
			color: var(--text-secondary);
		}
		
		/* Branch Badge */
		.branch-badge { 
			display: inline-flex; 
			align-items: center; 
			gap: 6px; 
			padding: 4px 10px; 
			border-radius: 999px; 
			font-size: 0.8rem; 
			font-weight: 700; 
			letter-spacing: 0.5px; 
		}
		.branch-main { 
			background: rgba(34, 197, 94, 0.15); 
			color: #22c55e; 
			border: 1px solid rgba(34, 197, 94, 0.5); 
		}
		.branch-testarea { 
			background: rgba(245, 158, 11, 0.15); 
			color: #f59e0b; 
			border: 1px solid rgba(245, 158, 11, 0.5); 
		}
		
		/* Buttons */
		.button {
			background: linear-gradient(135deg, #3a5998, #4a90e2);
			color: white;
			border: none;
			padding: 8px 16px;
			border-radius: 8px;
			font-weight: 600;
			cursor: pointer;
			text-decoration: none;
			display: inline-block;
		}
		.button.secondary {
			background: linear-gradient(135deg, #64748b, #475569);
		}
		
		/* Loading */
		.loading {
			text-align: center;
			padding: 40px;
			color: var(--text-secondary);
		}
		
		/* No data */
		.no-data {
			text-align: center;
			padding: 40px;
			color: var(--text-secondary);
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="card">
			<h2>üë• Spieler-√úbersicht <span id="branch-badge" class="branch-badge branch-main">MAIN</span></h2>
			<p>W√§hle einen Spieler aus, um die aktuellsten Spionageberichte und detaillierte Analysen anzuzeigen.</p>
			
			<div class="search-container">
				<input type="text" id="player-search" class="search-input" placeholder="Spieler suchen...">
			</div>
			
			<div class="stats-grid" id="stats-grid">
				<div class="stat-card">
					<div class="stat-number" id="total-players">-</div>
					<div class="stat-label">Spieler</div>
				</div>
				<div class="stat-card">
					<div class="stat-number" id="total-reports">-</div>
					<div class="stat-label">Berichte</div>
				</div>
				<div class="stat-card">
					<div class="stat-number" id="recent-reports">-</div>
					<div class="stat-label">Letzte 7 Tage</div>
				</div>
			</div>
		</div>

		<div class="card">
			<h3>üéØ Spieler ausw√§hlen</h3>
			<div id="loading" class="loading">Lade Spielerdaten...</div>
			<div id="players-container" class="players-grid" style="display: none;"></div>
			<div id="no-data" class="no-data" style="display: none;">
				Keine Spielerdaten verf√ºgbar. F√ºge zuerst Spionageberichte hinzu.
			</div>
		</div>

		<div class="card" id="player-details-card" style="display: none;">
			<div class="detail-header">
				<h3 id="selected-player-name">Spieler Details</h3>
				<div>
					<a id="back-to-database" class="button secondary" href="spy-database.html">Zur Datenbank</a>
				</div>
			</div>
			
			<div class="player-details active" id="player-details">
				<h4>üìä Berichtsverlauf</h4>
				<div id="report-history" class="report-history"></div>
				
				<h4>üîç Aktuellste Auswertung</h4>
				<div id="latest-evaluation"></div>
			</div>
		</div>
	</div>

	<!-- Firebase SDK -->
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

	<!-- App Scripts -->
	<script src="js/firebase-config.js"></script>
	<script src="js/theme-manager.js"></script>
	<script src="js/auth-manager.js"></script>
	<script src="js/firebase-sync.js"></script>
	<script src="js/spy-evaluator.js"></script>
	<script src="js/player-overview.js"></script>
</body>
</html>