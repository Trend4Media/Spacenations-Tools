<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spy Evaluator Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .evaluation-result { margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #dee2e6; }
        .evaluation-summary { margin-bottom: 15px; }
        .evaluation-summary h4 { margin: 0 0 8px 0; color: #0066cc; }
        .threat-analysis { margin-bottom: 15px; }
        .threat-analysis h5 { margin: 0 0 8px 0; color: #333; }
        .threat-badge { display: inline-block; padding: 6px 12px; border-radius: 6px; font-weight: 600; font-size: 0.9rem; }
        .recommendations { margin-bottom: 10px; }
        .recommendations h5 { margin: 0 0 8px 0; color: #333; }
        .recommendations ul { margin: 0; padding-left: 20px; }
        .recommendations li { margin-bottom: 4px; }
        .rec-high { color: #dc3545; font-weight: 600; }
        .rec-medium { color: #ffc107; }
        .rec-low { color: #6c757d; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        textarea { width: 100%; height: 200px; margin: 10px 0; }
        .test-data { background: #e9ecef; padding: 10px; border-radius: 4px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>üîç Spy Evaluator Test</h1>
            <p>Diese Seite testet die automatische Auswertung von Spionageberichten.</p>
            
            <h3>Test-Daten</h3>
            <div class="test-data">
                <strong>Beispiel 1 - Schwaches Ziel:</strong><br>
                Spionageeinheit: 2, Tarneinheit: 1, Invasionseinheit: 3, Pl√ºndereinheit: 1, Sabotageeinheit: 0
            </div>
            <div class="test-data">
                <strong>Beispiel 2 - Starkes Ziel:</strong><br>
                Spionageeinheit: 12, Tarneinheit: 8, Invasionseinheit: 15, Pl√ºndereinheit: 10, Sabotageeinheit: 9
            </div>
            
            <button onclick="testWeakTarget()">Test: Schwaches Ziel</button>
            <button onclick="testStrongTarget()">Test: Starkes Ziel</button>
            <button onclick="testCustom()">Test: Eigene Daten</button>
            
            <div id="results"></div>
        </div>
        
        <div class="card" id="custom-test" style="display: none;">
            <h3>Eigene Test-Daten</h3>
            <p>Gib deine eigenen Forschungswerte ein:</p>
            <label>Spionageeinheit: <input type="number" id="spionage" value="5" min="0" max="20"></label><br><br>
            <label>Tarneinheit: <input type="number" id="tarn" value="3" min="0" max="20"></label><br><br>
            <label>Invasionseinheit: <input type="number" id="invasion" value="7" min="0" max="20"></label><br><br>
            <label>Pl√ºndereinheit: <input type="number" id="pluender" value="4" min="0" max="20"></label><br><br>
            <label>Sabotageeinheit: <input type="number" id="sabotage" value="2" min="0" max="20"></label><br><br>
            <button onclick="runCustomTest()">Auswerten</button>
        </div>
    </div>

    <script src="js/spy-evaluator.js"></script>
    <script>
        function testWeakTarget() {
            const testData = {
                parsed: {
                    targetPlayer: "TestPlayer1",
                    planetName: "TestPlanet",
                    coords: { raw: "123:456:7" },
                    research: {
                        spionage: 2,
                        tarn: 1,
                        invasion: 3,
                        pluender: 1,
                        sabotage: 0
                    }
                }
            };
            runEvaluation(testData, "Schwaches Ziel");
        }
        
        function testStrongTarget() {
            const testData = {
                parsed: {
                    targetPlayer: "TestPlayer2",
                    planetName: "FestungsPlanet",
                    coords: { raw: "555:849:4" },
                    research: {
                        spionage: 12,
                        tarn: 8,
                        invasion: 15,
                        pluender: 10,
                        sabotage: 9
                    }
                }
            };
            runEvaluation(testData, "Starkes Ziel");
        }
        
        function testCustom() {
            const customDiv = document.getElementById('custom-test');
            customDiv.style.display = customDiv.style.display === 'none' ? 'block' : 'none';
        }
        
        function runCustomTest() {
            const testData = {
                parsed: {
                    targetPlayer: "CustomPlayer",
                    planetName: "CustomPlanet",
                    coords: { raw: "100:200:3" },
                    research: {
                        spionage: parseInt(document.getElementById('spionage').value) || 0,
                        tarn: parseInt(document.getElementById('tarn').value) || 0,
                        invasion: parseInt(document.getElementById('invasion').value) || 0,
                        pluender: parseInt(document.getElementById('pluender').value) || 0,
                        sabotage: parseInt(document.getElementById('sabotage').value) || 0
                    }
                }
            };
            runEvaluation(testData, "Eigene Daten");
        }
        
        function runEvaluation(testData, testName) {
            const result = window.SpyEvaluator.evaluate(testData);
            const resultsDiv = document.getElementById('results');
            
            let html = `<div class="card">
                <h3>üîç Auswertung: ${testName}</h3>
                <div class="test-data">
                    <strong>Test-Daten:</strong><br>
                    Spieler: ${testData.parsed.targetPlayer}<br>
                    Planet: ${testData.parsed.planetName} (${testData.parsed.coords.raw})<br>
                    Forschung: Spionage ${testData.parsed.research.spionage}, Tarn ${testData.parsed.research.tarn}, 
                    Invasion ${testData.parsed.research.invasion}, Pl√ºnder ${testData.parsed.research.pluender}, 
                    Sabotage ${testData.parsed.research.sabotage}
                </div>`;
            
            if (result.success) {
                html += window.SpyEvaluator.formatEvaluationForUI(result.evaluation);
            } else {
                html += `<div style="color: red;">Fehler: ${result.error}</div>`;
            }
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }
        
        // Automatischer Test beim Laden
        window.addEventListener('DOMContentLoaded', () => {
            console.log('Spy Evaluator Test geladen');
            console.log('SpyEvaluator verf√ºgbar:', !!window.SpyEvaluator);
        });
    </script>
</body>
</html>