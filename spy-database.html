<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Spionage-Datenbank</title>
	<link rel="stylesheet" href="css/theme-variables.css">
	<link rel="stylesheet" href="css/enhanced-navigation.css">
	<link rel="stylesheet" href="css/global-footer.css">
	<style>
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: var(--bg-gradient);
			color: var(--text-primary);
			min-height: 100vh;
			margin: 0;
		}
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		.card {
			background: var(--bg-panel);
			border: 2px solid var(--border-primary);
			border-radius: 15px;
			padding: 20px;
			box-shadow: 0 0 20px var(--border-shadow);
			backdrop-filter: blur(10px);
			margin-bottom: 20px;
		}
		.card h2 {
			margin-top: 0;
			color: var(--accent-primary);
			display: flex;
			align-items: center;
			gap: 10px;
		}
		.input-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
		.input-row input[type="url"] { flex: 1; min-width: 280px; padding: 10px; border-radius: 8px; border: 1px solid var(--card-border); background: var(--card-bg); color: var(--text-primary); }
		.button { background: linear-gradient(135deg, #3a5998, #4a90e2); color: white; border: none; padding: 10px 16px; border-radius: 8px; font-weight: 600; cursor: pointer; }
		.button.secondary { background: linear-gradient(135deg, #64748b, #475569); }
		#raw-html-container { display: none; margin-top: 15px; }
		#raw-html { width: 100%; min-height: 180px; border-radius: 8px; padding: 10px; border: 1px solid var(--card-border); background: var(--card-bg); color: var(--text-primary); }
		.status { margin-top: 10px; color: var(--text-secondary); }
		table { width: 100%; border-collapse: collapse; }
		th, td { padding: 10px; border-bottom: 1px solid var(--card-border); text-align: left; }
		th { color: var(--text-secondary); font-weight: 600; }
		.report-link { background: var(--accent-secondary); color: white; padding: 6px 10px; border-radius: 6px; text-decoration: none; font-weight: 600; }
		.branch-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px; font-size: 0.8rem; font-weight: 700; letter-spacing: 0.5px; }
		.branch-main { background: rgba(34, 197, 94, 0.15); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.5); }
		.branch-testarea { background: rgba(245, 158, 11, 0.15); color: #f59e0b; border: 1px solid rgba(245, 158, 11, 0.5); }
		
		/* Evaluation Styles */
		.evaluation-result { margin-top: 15px; padding: 15px; background: var(--card-bg); border-radius: 8px; border: 1px solid var(--card-border); }
		.evaluation-summary { margin-bottom: 15px; }
		.evaluation-summary h4 { margin: 0 0 8px 0; color: var(--accent-primary); }
		.threat-analysis { margin-bottom: 15px; }
		.threat-analysis h5 { margin: 0 0 8px 0; color: var(--text-primary); }
		.threat-badge { display: inline-block; padding: 6px 12px; border-radius: 6px; font-weight: 600; font-size: 0.9rem; }
		.recommendations { margin-bottom: 10px; }
		.recommendations h5 { margin: 0 0 8px 0; color: var(--text-primary); }
		.recommendations ul { margin: 0; padding-left: 20px; }
		.recommendations li { margin-bottom: 4px; }
		.rec-high { color: var(--danger-color, #ef4444); font-weight: 600; }
		.rec-medium { color: var(--warning-color, #f59e0b); }
		.rec-low { color: var(--text-secondary); }
		.evaluation-toggle { margin-top: 10px; }
		.auto-eval-indicator { display: inline-block; margin-left: 10px; padding: 4px 8px; background: rgba(34, 197, 94, 0.15); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.5); border-radius: 4px; font-size: 0.8rem; font-weight: 600; }
	</style>
</head>
<body>
	<div class="container">
		<div class="card">
			<h2>üì° Spionage-Datenbank <span id="branch-badge" class="branch-badge branch-main">MAIN</span></h2>
			<p>F√ºge die URL eines Spionageberichts ein. Das System versucht automatisch verschiedene Crawling-Methoden. Falls alle fehlschlagen, nutze "HTML einf√ºgen".</p>
			<div style="margin-bottom: 15px;">
				<a id="player-overview-link" class="button secondary" href="player-overview.html">üë• Spieler-√úbersicht</a>
				<a href="test-crawler.html" class="button secondary" target="_blank">üï∑Ô∏è Crawler testen</a>
			</div>
			<div class="input-row">
				<input id="report-url" type="url" placeholder="https://beta1.game.spacenations.eu/spy-report/...">
				<button id="fetch-and-save-btn" class="button">Kopieren & Speichern</button>
				<button id="toggle-paste" class="button secondary" type="button">HTML einf√ºgen</button>
			</div>
			<div id="raw-html-container">
				<textarea id="raw-html" placeholder="F√ºge hier den HTML-Inhalt des Berichts ein..."></textarea>
				<div style="margin-top: 8px;">
					<button id="parse-and-save-btn" class="button">Parsen & Speichern</button>
				</div>
			</div>
			<div id="status-message" class="status"></div>
		</div>

		<div class="card">
			<h2>üìã √úbersicht</h2>
			<table>
				<thead>
					<tr>
						<th>Spieler</th>
						<th>Planet</th>
						<th>Spionageeinheit</th>
						<th>Tarneinheit</th>
						<th>Invasionseinheit</th>
						<th>Pl√ºndereinheit</th>
						<th>Sabotageeinheit</th>
						<th>Auswertung</th>
						<th>Bericht</th>
					</tr>
				</thead>
				<tbody id="reports-tbody"></tbody>
			</table>
		</div>
	</div>

	<!-- Firebase SDK -->
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

	<!-- App Scripts -->
	<script src="js/firebase-config.js"></script>
	<script src="js/theme-manager.js"></script>
	<script src="js/auth-manager.js"></script>
	<script src="js/firebase-sync.js"></script>
	<script src="js/spy-parser.js"></script>
	<script src="js/spy-evaluator.js"></script>
	<script src="js/spy-crawler.js"></script>
	<script src="js/spy-database.js"></script>
</body>
</html>